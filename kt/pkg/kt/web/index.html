<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>kt tail</title>
    <link rel="shortcut icon"
          href="data:image/x-icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAABQUFAOUFBQQU5NTElLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSUtHRUlLR0VJS0dFSU5NTElQUFBCT09PDlBQUEBPT0/kWF9h9Gd7gvNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNneoHzZ3qB82d6gfNne4LzWF9i9E9PT+ZQUFBCTkxNSFtgX/NjcXL/h7XG/5/h+v+f4Pj/n+D4/5/g+P+f4Pj/n+D4/5/g+P+f4Pj/n+D4/5/g+P+f4Pj/n+D4/5/g+P+f4Pj/n+D4/5/g+P+f4Pj/n+D4/5/g+P+f4Pj/n+D4/5/g+P+f4Pj/n+H6/4e1x/9jcHL/Wl9e9E5NTUpJRkZHcIB98pi9tf9mdHb/irrM/6Lm//+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Lm//+Ku83/ZnR2/5e7tP9vf3z0SUZHSklFRkdwgH3yuvHm/5rAuP9mdHb/irrN/6Ll/v+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+i5f7/irvO/2Vzdv+Zvrf/uvHm/2+AffRJRkZKSUVGR2+AfPK58OX/vfbq/5m+t/9mdHb/i7zO/6Ll/v+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/ouX+/4u8zv9ldHb/mL22/7316v+58OX/b3989ElGRkpJRUZHb4B88rnw5f+89On/vfXq/5m+tv9ldHb/i7zP/6Ll//+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Lm//+LvdD/ZXR2/5i9tf+89er/vPXp/7nw5f9vf3z0SUZGSklFRkdvgHzyufDl/7z06f+89On/vPXq/5i9tf9mdHf/i73Q/6Ll//+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+i5v//jL7Q/2V0d/+XvLT/vPXq/7z06f+89On/ufDl/29/fPRJRkZKSUVGR2+AfPK58OX/vPTp/7z06f+89On/vPXq/5e7tP9ldHb/jL7R/6Lm//+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oeT9/6Hk/f+h5P3/oub//4y+0v9ldHb/lruz/7z16v+89On/vPTp/7z06f+58OX/b3989ElGRkpJRUZHb4B88rnw5f+89On/vPTp/7z06f+89On/vPXq/5a7s/9ldHf/jL/R/6Lm//+h5P3/oeT9/6Ll/v+h4/z/oeP8/6Ll/v+h5P3/oeT9/6Lm//+Nv9L/ZnR3/5a6sv+89en/vPTp/7z06f+89On/vPTp/7nw5f9vf3z0SUZGSklFRkdvgHzyufDl/7z06f+89On/vPTp/7z06f+89On/vPXq/5W5sv9ldHf/jcDT/6Lm//+i5v//l9Ho/3STn/90kp7/ltHn/6Lm//+i5v//jcDT/2V0d/+VubH/vPTp/7z06f+89On/vPTp/7z06f+89On/ufDl/29/fPRJRkZKSUVGR2+AfPK58OX/vPTp/7z06f+89On/vPTp/7z06f+89On/vPTp/5W5sf9mdnn/jL3P/4Sxwf9reH3/nJub/52cnP9reH3/g7DA/4u90P9ndnn/lbix/7z06f+89On/vPTp/7z06f+89On/vPTp/7z06f+58OX/b3989ElGRkpJRUZHb4B88rnw5f+89On/vPTp/7z06f+89On/vPTp/7z06f+99er/vfXq/4Whm/9YXmD/foGC/87Nzf/8/Pz//Pz8/87Nzf9/goP/WF5g/4Sgmv+99er/vfXq/7z06f+89On/vPTp/7z06f+89On/vPTp/7nw5f9vf3z0SUZGSklFRkdvgHzyufDl/7z06f+89On/vPTp/7z06f+89On/vfbr/7bs4f+Or6n/cXl4/6mpqf/w8O////////////////////////Dw8P+rqqr/cXl4/42uqP+26+H/vfbr/7z06f+89On/vPTp/7z06f+89On/ufDl/29/fPRJRkZKSUVGR2+AfPK58OX/vPTp/7z06f+89On/vfXq/7z16f+j0Mf/dYeD/4eIiP/X1tb//v7+//////////////////////////////////7+/v/Y19f/iImJ/3SFgv+jz8b/vPTp/7316v+89On/vPTp/7z06f+58OX/b3989ElGRkpJRUZHb4B88rnw5f+89On/vPTp/7326/+z593/h6Wf/3N5eP+0s7P/9PT0///////////////////////////////////////////////////////19fX/tbS1/3N5eP+Go57/s+bc/7326/+89On/vPTp/7nw5f9vf3z0SUZGSklFRkdvgHzyufDl/7326v+78+j/nse+/3KAff+QkJD/4N/g////////////////////////////////////////////////////////////////////////////4eDh/5GSkv9xf33/ncW9/7vy5/+99ur/ufDl/29/fPRJRkZKSUVGR3CAffK78uf/sOLY/4Galf9zd3b/wL+///n5+f//////////////////////////////////////////////////////////////////////////////////////+fn5/8DAwP90eHf/gJmT/6/h1/+78uf/b4B99ElGRkpKR0dHbHt48pW5sf9rd3v/V1dj/66urv//////+/v7//f39//39/f/9/f3//f39//39/f/9/f3//j4+P/+/v7//////////////////////////////////////////////////////6+vr/9XV2P/a3Z6/5W5sf9se3j0SkdHSk9OTkdVV1fyZWh9/4aGzf9xcZ3/s7Ox//////+zs7P/hISE/4aGhv+Ghob/hoaG/4aGhv+Ghob/jIyM/+Pj4///////////////////////////////////////////////////////s7Oy/3Fxnf+Ghs7/Zmh//1VXV/NPTk5JUFBPIFBPT7hsbJD+l5jz/3R0ov+ysrH//////+fn5//X19f/2NjY/9jY2P/Y2Nj/2NjY/9jY2P/b29v/9/f3//////////////////////////////////////////////////////+zs7L/c3Sh/5eY8/9sbZH+UE9QuFBQTyBQUFAATk5NGlBQUZpnZ4X4Z2iG/7Ozsv//////7e3t/+Hh4f/h4eH/4eHh/+Hh4f/h4eH/4eHh/+Hh4f/f39//39/f/9/f3//f39//39/f/9/f3//f39//39/f/9/f3//s7Oz//////7S0s/9nZ4b/Z2iG+FFRUZlPT04aT09OAAAAAABOTkwATU1LC09PTnJQUFLrs7Oz//////+wsLD/gYGB/4ODg/+Dg4P/g4OD/4ODg/+Dg4P/g4OD/4ODg/+Dg4P/g4OD/4ODg/+Dg4P/g4OD/4ODg/+Dg4P/gYGB/7Gxsf//////tLS0/1BQUutPT05yTk5KCk5OTAAAAAAAAAAAAAAAAABPT04ARUVCAk9PT5WysrL///////r6+v/19fX/9fX1//X19f/19fX/9fX1//X19f/19fX/9fX1//X19f/19fX/9fX1//X19f/19fX/9fX1//X19f/19fX/+vr6//////+zs7P/T09PlkNDQAJOTk4AAAAAAAAAAAAAAAAAAAAAAFJSUgBVVVUAT09PiLKysv//////1NTU/7i4uP+5ubn/ubm5/7m5uf+5ubn/ubm5/7m5uf+5ubn/ubm5/7m5uf+5ubn/ubm5/7m5uf+5ubn/ubm5/7i4uP/U1NT//////7Ozs/9PT0+JV1dXAFFRUQAAAAAAAAAAAAAAAAAAAAAAUlJSAFVVVQBPT0+IsrKy///////AwMD/mJiY/5mZmf+ZmZn/mZmZ/5mZmf+ZmZn/mZmZ/5mZmf+ZmZn/mZmZ/5mZmf+ZmZn/mZmZ/5mZmf+ZmZn/mJiY/8DAwP//////s7Oz/09PT4pXV1cAUVFRAAAAAAAAAAAAAAAAAAAAAABSUlIAVVVVAE9PT4iysrL////////////+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7///////////+zs7P/T09PildXVwBRUVEAAAAAAAAAAAAAAAAAAAAAAFJSUgBVVVUAT09PiLKysv//////u7u7/5GRkf+Tk5P/k5OT/5OTk/+Tk5P/k5OT/5OTk/+Tk5P/k5OT/5OTk/+Tk5P/k5OT/5OTk/+Tk5P/k5OT/5GRkf+7u7v//////7Ozs/9PT0+KV1dXAFFRUQAAAAAAAAAAAAAAAAAAAAAAUlJSAFVVVQBPT0+IsrKy///////a2tr/wsLC/8PDw//Dw8P/w8PD/8PDw//Dw8P/w8PD/8PDw//Dw8P/w8PD/8PDw//Dw8P/w8PD/8PDw//Dw8P/wsLC/9ra2v//////s7Oz/09PT4pXV1cAUVFRAAAAAAAAAAAAAAAAAAAAAABSUlIAVVVVAE9PT4ivr6////////7+/v/+/v7//f39//39/f/9/f3//f39//39/f/9/f3//f39//39/f/9/f3//f39//39/f/9/f3//f39//39/f/9/f3//Pz8//39/f+wsLD/T09PildXVwBRUVEAAAAAAAAAAAAAAAAAAAAAAFJSUgBRUVEAUFBQfWxsbPaoqKjbrKys2Z+fn+CBgYH0goKC84KCgvOCgoLzgoKC84KCgvOCgoLzgoKC84KCgvOCgoLzgoKC84KCgvOCgoLzgoKC84KCgvOCgoLzg4OD82xsbPZQUFB+UlJSAFBQUAAAAAAAAAAAAAAAAAAAAAAAVFRUAE9PTwBQUFAfSUlJSUdHRyxHR0cpRkZGMkVFRUpFRUVJRUVFSUVFRUlFRUVJRUVFSUVFRUlFRUVJRUVFSUVFRUlFRUVJRUVFSUVFRUlFRUVJRUVFSUVFRUlFRUVJSkpKSVBQUB9QUFAATU1NAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAcAAAAPgAAAH8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA8="/>
    <style>
        pre {
            white-space: pre-wrap; /* Since CSS 2.1 */
            white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
            white-space: -o-pre-wrap; /* Opera 7 */
            word-wrap: break-word; /* Internet Explorer 5.5+ */
        }
    </style>
</head>

<body>
<div id="log"></div>
</body>
<script type="text/javascript">
    function pad2(n) {
        return n < 10 ? '0' + n : n
    }

    function now() {
        const d = new Date();
        return d.getFullYear().toString() + '-' + pad2(d.getMonth() + 1) + '-' + pad2(d.getDate())
            + ' ' + pad2(d.getHours()) + ':' + pad2(d.getMinutes()) + ':' + pad2(d.getSeconds())
            + '.' + ('00' + d.getMilliseconds()).slice(-3);
    }

    // type sseBean struct {
    // Topic     string
    // Offset    string
    // Partition string
    // Key       string
    // Timestamp string
    // Message   string
    // }
    // helper function: log message to screen
    function log(j) {
        let pre = document.createElement('pre');
        msg = now() + '\n\n'
            + 'Topic:     ' + j.Topic + '\n'
            + 'Offset:    ' + j.Offset + '\n'
            + 'Partition: ' + j.Partition + '\n'

        if (j.Key) {
            msg += 'Key:       ' + j.Key + '\n'
        }

        msg += 'Timestamp: ' + j.Timestamp + '\n'
            + 'Message:   ðŸ‘‡ (' + j.MessageSize + ')\n\n' + j.Message + '\n\n'
        pre.textContent = msg;
        pre.style.color = 'red';
        let log = document.getElementById('log');
        log.prepend(pre)

        if (log.children.length > 100) {
            log.removeChild(log.lastChild);
        }

        setTimeout(function () {
            pre.style.color = 'black';
        }, 10000)
    }

    const source = new EventSource("{{.ContextPath}}/sse");
    source.onmessage = function (e) {
        let j = JSON.parse(e.data)
        log(j)
    }
    source.onerror = function (err) {
        console.warn(err)
    };
    source.onclose = function (err) {
        console.info("closed", err)
    };

</script>

</html>